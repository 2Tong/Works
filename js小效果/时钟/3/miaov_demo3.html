<!DOCTYPE html PUBLIC "-//W3C//h2D XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/h2D/xhtml1-transitional.h2d">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>超酷数码钟表 - 妙味课堂 - www.miaov.com</title>
<link href="miaov_style.css" rel="stylesheet" type="text/css" />
<script>
var aTime=["images/0.png","images/1.png","images/2.png","images/3.png","images/4.png","images/5.png","images/6.png","images/7.png","images/8.png","images/9.png"];
var aDay=["images/seven.png","images/one.png","images/two.png","images/three.png","images/four.png","images/five.png","images/six.png"];
window.onload=function()
{
	var aImg=document.getElementsByTagName("img");
	var aDate=[];
	var oWeek=null;
	var oTimer = 0;
	var aNub = [];
	for(var i=0;i<aImg.length;i++)
	{
		aImg[i].className=="num"&&aDate.push(aImg[i]);
		if(aImg[i].className=="num2")
		{
			oWeek=aImg[i];
		}	
	}
	toTime();
	function toTime()
	{
		var oDate=new Date();
		var iYear=oDate.getFullYear();
		var sMon=toDB(oDate.getMonth()+1);
		var sDate=toDB(oDate.getDate());
		var sHours=toDB(oDate.getHours());
		var sMin=toDB(oDate.getMinutes());
		var sSec=toDB(oDate.getSeconds());
		var iDay=oDate.getDay();
		var sTime=""+iYear+sMon+sDate+sHours+sMin+sSec;
		var aTime2= [];
		for(var i=0;i<sTime.length;i++)
		{
			aDate[i].src=aTime[sTime.charAt(i)];
			aTime2[i] = sTime.charAt(i);
			
		}
		oWeek.src=aDay[iDay];
		//alert(sNub+'||'+sTime);
		setInterval(function(){
			var oDate=new Date();
			var iYear=oDate.getFullYear();
			var sMon=toDB(oDate.getMonth()+1);
			var sDate=toDB(oDate.getDate());
			var sHours=toDB(oDate.getHours());
			var sMin=toDB(oDate.getMinutes());
			var sSec=toDB(oDate.getSeconds());
			var iDay=oDate.getDay();
			var sTime=""+iYear+sMon+sDate+sHours+sMin+sSec;
			var aTime2= [];
			for(var i=0;i<sTime.length;i++)
			{
				aTime2[i] = sTime.charAt(i);

			}
			for( var i=0; i<sTime.length; i++){
				//console.log(sNub.charAt(i),sTime.charAt(i),sNub.charAt(i) != sTime.charAt(i));
				if(aNub[i] != aTime2[i])
				{

					aNub[i]=aTime2[i];
					tabTime(aDate[i],aNub[i]);
					console.log(aNub[i]);

				}
			}
		},1000);
		
	}
};

function tabTime(obj,aTime2){
	
	var iNub = 0;
	var oTimer = 0;
	var iHeight = parseInt(getStyle(obj,'height'));
	oTimer=setInterval(function(){
		if(Math.abs(iHeight-iNub)<=2){
			obj.src=aTime[aTime2];
		}
		if(iNub > iHeight*2){

			clearInterval(oTimer);
			obj.style.height = iHeight+'px';
			obj.style.top = 0;

		}else{

			obj.style.height = Math.abs(iHeight-iNub)+'px';
			obj.style.top = -(iHeight/2-Math.abs(iHeight-iNub)/2)+'px';
			iNub+=2;

		}

	},Math.floor(500/iHeight))
	
}

function getStyle(obj,sAttr){

	return obj.currentStyle?obj.currentStyle[sAttr]:getComputedStyle(obj)[sAttr];

}
// 获取字符串的第几位 charAt
function toDB(iNub)
{
	if(iNub<10)
	{
		return "0"+iNub;
	}
	return iNub+"";
}
	
</script>
</head>
<body>

<div id="clock" class="date">
    <h2><img src="images/title.png" /></h2>
    <div class="year">
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img src="images/year.png" alt="year" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img src="images/month.png" alt="month" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img src="images/seven.png" alt="seven" longdesc="http://www.miaov.com" />
    </div>
    <div class="time">
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img src="images/sign.png" alt="sign" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img src="images/sign.png" alt="sign" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="num" src="images/0.png" alt="0" longdesc="http://www.miaov.com" />
        <img class="pos2" src="images/week.png" alt="week" longdesc="http://www.miaov.com" />
        <img class="num2" src="images/one.png" alt="one" longdesc="http://www.miaov.com" />
    </div>
    <div class="url" title="妙味课堂-超酷时钟"><a href="http://www.miaov.com/"><img src="images/miaov.png" alt="妙味课堂" longdesc="http://www.miaov.com" /></a></div>
</div>

</body>
</html>
